import{_ as f}from"./WNRJOefW.js";import{g as v,j as w,x as _,k as x,c as n,l as r,a as t,y as M,t as a,b as l,w as u,s as A,o as g,d as p}from"./BH7xsakx.js";import{u as C,a as S}from"./BPzreZ2E.js";import{U as j}from"./D9-zCs3w.js";import{c as m}from"./Iw-F9__c.js";const $=m("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const N=m("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);const U=m("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),L={key:0,class:"max-w-md mx-auto mt-20 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg"},R={key:1},z={key:0,class:"flex justify-center py-12"},K={key:1,class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400"},P={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},V={class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},q={class:"flex items-center justify-between"},B={class:"text-3xl font-bold text-gray-900 dark:text-white mt-1"},H={class:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg"},I={class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},D={class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},E={class:"flex items-center justify-between"},F={class:"text-3xl font-bold text-gray-900 dark:text-white mt-1"},Q={class:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg"},T={class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},G={class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},J={class:"flex items-center justify-between"},O={class:"text-3xl font-bold text-gray-900 dark:text-white mt-1"},W={class:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg"},X={class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Y={class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},Z={class:"flex items-center justify-between"},tt={class:"text-3xl font-bold text-gray-900 dark:text-white mt-1"},et={class:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg"},st={class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},rt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6"},at={class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},ot={class:"space-y-2"},dt={class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},it={class:"space-y-3"},nt={class:"flex justify-between items-center"},lt={class:"flex justify-between items-center"},gt={class:"text-gray-900 dark:text-white font-medium"},yt={class:"flex justify-between items-center"},xt={class:"text-gray-900 dark:text-white font-medium"},mt={class:"flex justify-between items-center"},ct={class:"text-gray-900 dark:text-white font-medium"},vt=v({__name:"index",setup(ut){const s=C(),y=S();w(async()=>{y.loadApiKey(),y.isAuthenticated.value&&await s.initialize()}),_(()=>{s.cleanup()});const b=x(()=>{if(!s.status?.uptime)return"N/A";const d=Math.floor(s.status.uptime/1e3),e=Math.floor(d/86400),i=Math.floor(d%86400/3600),o=Math.floor(d%3600/60);return e>0?`${e}d ${i}h ${o}m`:i>0?`${i}h ${o}m`:`${o}m`}),k=x(()=>s.metrics?.memory?`${(s.metrics.memory.heapUsed/1024/1024).toFixed(1)} MB`:"N/A"),h=x(()=>s.metrics?.memory?(s.metrics.memory.heapUsed/s.metrics.memory.heapTotal*100).toFixed(1):0);return(d,e)=>{const i=f;return g(),n("div",null,[r(y).isAuthenticated.value?(g(),n("div",R,[e[19]||(e[19]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Dashboard "),t("p",{class:"text-gray-600 dark:text-gray-400"}," Monitor your Conduit server in real-time ")],-1)),r(s).isLoading?(g(),n("div",z,[...e[6]||(e[6]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):r(s).error?(g(),n("div",K,a(r(s).error),1)):(g(),n("div",P,[t("div",V,[t("div",q,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Connected Clients ",-1)),t("p",B,a(r(s).metrics?.clients.connected??0),1)]),t("div",H,[l(r(j),{class:"h-6 w-6 text-blue-600 dark:text-blue-400"})])]),t("p",I," Peak: "+a(r(s).metrics?.clients.peak??0),1)]),t("div",D,[t("div",E,[t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Messages Relayed ",-1)),t("p",F,a(r(s).metrics?.messages.relayed?.toLocaleString()??0),1)]),t("div",Q,[l(r(U),{class:"h-6 w-6 text-green-600 dark:text-green-400"})])]),t("p",T,a(r(s).metrics?.messages.throughputPerSecond??0)+" msg/s ",1)]),t("div",G,[t("div",J,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Uptime",-1)),t("p",O,a(r(b)),1)]),t("div",W,[l(r($),{class:"h-6 w-6 text-purple-600 dark:text-purple-400"})])]),t("p",X," v"+a(r(s).status?.version??"N/A"),1)]),t("div",Y,[t("div",Z,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Memory",-1)),t("p",tt,a(r(k)),1)]),t("div",et,[l(r(N),{class:"h-6 w-6 text-orange-600 dark:text-orange-400"})])]),t("p",st,a(r(h))+"% of heap ",1)])])),t("div",rt,[t("div",at,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Quick Actions ",-1)),t("div",ot,[t("button",{class:"w-full px-4 py-2 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",onClick:e[1]||(e[1]=(...o)=>r(s).fetchClients&&r(s).fetchClients(...o))}," Refresh Clients "),t("button",{class:"w-full px-4 py-2 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",onClick:e[2]||(e[2]=(...o)=>r(s).fetchMetrics&&r(s).fetchMetrics(...o))}," Refresh Metrics "),l(i,{to:"/clients",class:"block w-full px-4 py-2 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},{default:u(()=>[...e[11]||(e[11]=[p(" View All Clients ",-1)])]),_:1}),l(i,{to:"/settings",class:"block w-full px-4 py-2 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},{default:u(()=>[...e[12]||(e[12]=[p(" Server Settings ",-1)])]),_:1})])]),t("div",dt,[e[18]||(e[18]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Server Status ",-1)),t("div",it,[t("div",nt,[e[14]||(e[14]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Status",-1)),t("span",{class:A(["px-2 py-1 rounded-full text-xs font-medium",r(s).status?.running?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"])},a(r(s).status?.running?"Running":"Stopped"),3)]),t("div",lt,[e[15]||(e[15]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Rate Limit Hits",-1)),t("span",gt,a(r(s).metrics?.rateLimit.hits??0),1)]),t("div",yt,[e[16]||(e[16]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Errors",-1)),t("span",xt,a(r(s).metrics?.errors.total??0),1)]),t("div",mt,[e[17]||(e[17]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Queued Messages",-1)),t("span",ct,a(r(s).metrics?.messages.queued??0),1)])])])])])):(g(),n("div",L,[e[4]||(e[4]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," Authentication Required ",-1)),e[5]||(e[5]=t("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," Enter your API key to access the admin dashboard. ",-1)),t("form",{onSubmit:e[0]||(e[0]=M(()=>{const c=d.$event.target.elements.namedItem("apiKey")?.value;c&&(r(y).setApiKey(c),r(s).initialize())},["prevent"]))},[...e[3]||(e[3]=[t("input",{name:"apiKey",type:"password",placeholder:"API Key",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,-1),t("button",{type:"submit",class:"mt-4 w-full px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"}," Connect ",-1)])],32)]))])}}});export{vt as default};
