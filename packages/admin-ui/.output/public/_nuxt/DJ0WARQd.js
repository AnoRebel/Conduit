import{_ as k}from"./WNRJOefW.js";import{g as b,r as v,j as _,k as w,c,a as t,l as a,b as d,d as y,m as C,I as D,n as B,q as S,F as j,p as L,o as l,w as M,t as i,s as N}from"./BH7xsakx.js";import{u as R}from"./BPzreZ2E.js";import{R as V}from"./Dq_xLCce.js";import{c as x}from"./Iw-F9__c.js";const $=x("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const z=x("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);const A=x("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),I={class:"flex items-center justify-between mb-6"},q={class:"mb-6"},T={class:"relative"},F={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},U={class:"w-full"},E={class:"divide-y divide-gray-200 dark:divide-gray-700"},H={class:"px-6 py-4"},Q={class:"px-6 py-4"},X={class:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400"},G={class:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400"},J={class:"px-6 py-4 text-right"},K={class:"flex justify-end gap-2"},O=["onClick"],P=["onClick"],W={key:0},at=b({__name:"index",setup(Y){const n=R(),o=v("");_(()=>{n.fetchClients()});const g=w(()=>{if(!o.value)return n.clients;const s=o.value.toLowerCase();return n.clients.filter(e=>e.id.toLowerCase().includes(s))});async function p(s){confirm(`Disconnect client ${s}?`)&&await n.disconnectClient(s)}async function u(s){const e=prompt(`Ban reason for ${s}:`);e!==null&&await n.banClient(s,e||void 0)}function m(s){return new Date(s).toLocaleString()}return(s,e)=>{const f=k;return l(),c("div",null,[t("div",I,[e[3]||(e[3]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Clients "),t("p",{class:"text-gray-600 dark:text-gray-400"}," Manage connected clients ")],-1)),t("button",{class:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",onClick:e[0]||(e[0]=(...r)=>a(n).fetchClients&&a(n).fetchClients(...r))},[d(a(V),{class:"h-4 w-4"}),e[2]||(e[2]=y(" Refresh ",-1))])]),t("div",q,[t("div",T,[d(a(z),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),C(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>B(o)?o.value=r:null),type:"text",placeholder:"Search by client ID...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[D,a(o)]])])]),t("div",F,[t("table",U,[e[5]||(e[5]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Client ID "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Connected At "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Messages "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",E,[(l(!0),c(j,null,L(a(g),r=>(l(),c("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[t("td",H,[d(f,{to:`/clients/${r.id}`,class:"text-primary-600 dark:text-primary-400 hover:underline font-mono text-sm"},{default:M(()=>[y(i(r.id),1)]),_:2},1032,["to"])]),t("td",Q,[t("span",{class:N(["px-2 py-1 rounded-full text-xs font-medium",r.connected?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-900/30 text-gray-700 dark:text-gray-400"])},i(r.connected?"Connected":"Disconnected"),3)]),t("td",X,i(m(r.connectedAt)),1),t("td",G,i(r.messagesReceived)+" / "+i(r.messagesSent),1),t("td",J,[t("div",K,[t("button",{class:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Disconnect",onClick:h=>p(r.id)},[d(a(A),{class:"h-4 w-4"})],8,O),t("button",{class:"p-2 text-gray-600 dark:text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",title:"Ban",onClick:h=>u(r.id)},[d(a($),{class:"h-4 w-4"})],8,P)])])]))),128)),a(g).length===0?(l(),c("tr",W,[...e[4]||(e[4]=[t("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"}," No clients found ",-1)])])):S("",!0)])])])])}}});export{at as default};
